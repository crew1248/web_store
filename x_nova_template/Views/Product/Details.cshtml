@model x_nova_template.Models.Product
@{
    ViewBag.Title = Model.ProductName;
    Layout = "~/Views/Shared/_PageMenuLayout.cshtml";
    x_nova_template.Models.ProdImage previewImg = Model.ProdImages.SingleOrDefault(x => x.IsPreview == 1);
    string siteurl = "";
    bool islocal = Request.IsLocal;
    siteurl = islocal ? siteurl = "~" : siteurl = System.Configuration.ConfigurationManager.AppSettings["SitePath"] as string;
}

<div class="prod-view prod-view__details clear-fix" id="pid_@Model.ID">

    <div class="breadcrumb">@Html.RouteLink("Главная", "home") /<a href="@Url.Action("ProdList", "Product", new { catId = Model.CategoryID })">@ProductController.GetCatName(Model.CategoryID)</a> / @Model.ProductName</div>
    <h1>@Model.ProductName</h1>

    <div class="view-img">
        <div class="prod-image">
            <div id="imwrap" style="display: inline-block;">
                <img class="prod-view__target-img img-responsive" data-zoom-image="@Url.Content(siteurl+"/Content/Files/Product/" + Model.ID + "/" + Model.ProdImages.Where(x => x.IsPreview == 1).SingleOrDefault().ImageMimeType)" id="zoom_1" src="@Url.Content(siteurl+"/Content/Files/Product/" + Model.ID + "/" + Model.ProdImages.Where(x => x.IsPreview == 1).SingleOrDefault().ImageMimeType)" />
            </div>
        </div>
        <div class="imglist-wrap imglist-view" id="prod_sl_1">
            <i class="fa fa-chevron-left prev"></i>
            <div class="prod-imglist view-imglist">

                <ul id="gallery_01">

                    <li>
                        <img class="detail-item" data-id="@previewImg.ID" data-pid="@previewImg.ProductID" src="@Url.Content(siteurl + "/Content/Files/Product/" + previewImg.ProductID + "/200x150/" + previewImg.ImageMimeType)" height="76" width="60" />
                    </li>

                    @foreach (var img in Model.ProdImages.Where(x => x.IsPreview != 1).OrderByDescending(x => x.Sortindex))
                    {


                        <li>
                            <img class="detail-item" data-id="@img.ID" data-pid="@img.ProductID" src="@Url.Content(siteurl+"/Content/Files/Product/" + img.ProductID + "/200x150/" + img.ImageMimeType)" height="76" width="60" />
                        </li>

                    }
                </ul>

            </div>
            <i class="fa fa-chevron-right next"></i>
        </div>
    </div>
    <div class="listview-wrap">
        <div class="xn-i-details">
            <p><b>Характеристики:</b></p>
            <table>
                <tr class="d-type">
                    <th>Тип</th>
                    <td> @Model.ProductName</td>
                </tr>
                <tr class="d-cat">
                    <th>Область</th>
                    <td>@ProductController.GetCatName(Model.CategoryID)</td>
                </tr>
                @if (!string.IsNullOrWhiteSpace(Model.MatIronForm))
                {

                    <tr class="d-matprod">
                        <th>Марка стали формообразующих</th>
                        <td>@Model.MatIronForm</td>
                    </tr>
                }

                @if (!string.IsNullOrWhiteSpace(Model.Hardness))
                {

                    <tr class="d-hard">
                        <th>Твёрдость</th>
                        <td>@Model.Hardness</td>
                    </tr>
                }
                @if (!string.IsNullOrWhiteSpace(Model.MatProd))
                {

                    <tr class="d-matprod">
                        <th>Материал изделия</th>
                        <td>@Model.MatProd</td>
                    </tr>
                }
                @if (!string.IsNullOrWhiteSpace(Model.ProdTime))
                {

                    <tr class="d-chan">
                        <th>Срок изготовления пресс-форм до Т1</th>
                        <td>@Model.ProdTime</td>
                    </tr>
                }
                @if (!string.IsNullOrWhiteSpace(Model.MatForm))
                {

                    <tr class="d-matform">
                        <th>Материал формообразующих</th>
                        <td>@Model.MatForm</td>
                    </tr>
                }
                @if (!string.IsNullOrWhiteSpace(Model.Channel))
                {

                    <tr class="d-chan">
                        <th>Тип канала</th>
                        <td>@Model.Channel</td>
                    </tr>
                }
                @if (!string.IsNullOrWhiteSpace(Model.Coupling))
                {

                    <tr class="d-coup">
                        <th>Система охлаждения</th>
                        <td>@Model.Coupling</td>
                    </tr>
                }

                @if (!string.IsNullOrWhiteSpace(Model.Block))
                {

                    <tr class="d-block">
                        <th>Блок</th>
                        <td>@Model.Block</td>
                    </tr>
                }

                @if (!string.IsNullOrWhiteSpace(Model.Size))
                {

                    <tr class="d-chan">
                        <th>Размер</th>
                        <td>@Model.Size</td>
                    </tr>
                }
            </table>
        </div>

    </div>


</div>
@Scripts.Render("~/bundles/zoom")
<script>
    $(function () {
        $('.prod-imglist li:eq(0)').css({ border: '1px solid rgb(189, 41, 41)' });
        // $('#zoom_1').elevateZoom({ tint: true, tintColour: 'black', tintOpacity: 0.5 });

        if (!XN.IsTablet)
            $('#zoom_1').elevateZoom();

        $('.prev, .next').hide();
        // slider 1

        $('#prod_sl_1 .prod-imglist').jcarousel({ wrap: null });
        var pimgList = $('#prod_sl_1  .prod-imglist').jcarousel();
        $('#prod_sl_1 .prev')
                   .on('jcarouselcontrol:active', function () {
                       $(this).removeClass('inactive');
                   })
                   .on('jcarouselcontrol:inactive', function () {
                       $(this).addClass('inactive');

                   })
                   .jcarouselControl({
                       target: '-=1',
                       carousel: pimgList
                   });

        $('#prod_sl_1 .next')
                .on('jcarouselcontrol:active', function () {

                    $(this).removeClass('inactive');
                })
                .on('jcarouselcontrol:inactive', function () {
                    $(this).addClass('inactive');

                }).jcarouselControl({
                    target: '+=1',
                    carousel: pimgList
                });

        $("#prod_sl_1 .prod-imglist").jcarousel();

    });


</script>
