@model x_nova_template.Models.Product
@{
    ViewBag.Title = Model.ProductName;
    Layout = "~/Views/Shared/_PageMenuLayout.cshtml";
    x_nova_template.Models.ProdImage previewImg = Model.ProdImages.SingleOrDefault(x => x.IsPreview == 1);
    string siteurl = "";
    bool islocal = Request.IsLocal;
    siteurl = islocal ? siteurl = "~" : siteurl = System.Configuration.ConfigurationManager.AppSettings["SitePath"] as string;
}

<div class="prod-view prod-view__details clear-fix" id="pid_@Model.ID">

    <div class="breadcrumb">@Html.ActionLink("Главная", "Index","Home") / <a href="@Url.Action("ProdList", "Product", new { catId = Model.CategoryID })">@ProductController.GetCatName(Model.CategoryID)</a> / @Model.ProductName</div>
    <h1>@Model.ProductName</h1>

    <div class="view-img">
        <div class="prod-image">
            <div id="imwrap" style="display: inline-block;">
                <img class="prod-view__target-img img-responsive" data-zoom-image="@Url.Content("/Content/Files/Product/" + Model.ID + "/" + Model.ProdImages.Where(x => x.IsPreview == 1).SingleOrDefault().ImageMimeType)" id="zoom_1" src="@Url.Content("/Content/Files/Product/" + Model.ID + "/" + Model.ProdImages.Where(x => x.IsPreview == 1).SingleOrDefault().ImageMimeType)" />
            </div>
        </div>
        <div class="imglist-wrap imglist-view" id="prod_sl_1">
            <i class="fa fa-chevron-left prev"></i>
            <div class="prod-imglist view-imglist">

                <ul id="gallery_01">

                    <li>
                        <img class="detail-item" data-id="@previewImg.ID" data-pid="@previewImg.ProductID" src="@Url.Content("/Content/Files/Product/" + previewImg.ProductID + "/200x150/" + previewImg.ImageMimeType)" height="76" width="60" />
                    </li>

                    @foreach (var img in Model.ProdImages.Where(x => x.IsPreview != 1).OrderByDescending(x => x.Sortindex))
                    {


                        <li>
                            <img class="detail-item" data-id="@img.ID" data-pid="@img.ProductID" src="@Url.Content("/Content/Files/Product/" + img.ProductID + "/200x150/" + img.ImageMimeType)" height="76" width="60" />
                        </li>

                    }
                </ul>

            </div>
            <i class="fa fa-chevron-right next"></i>
        </div>
    </div>
    <div class="item-features-wrap">
        <div class="item-features">
            <div class="item-features__price">
                <div class="item-features__price-value">@Model.Price.ToString("N0") р. </div>
            </div>
            <div class="item-features__title">Детали изделия:</div>
            <div class="item-features__table">
                <table>
                    @*@if (!string.IsNullOrWhiteSpace(Model.Price.ToString()))
                    {

                        <tr class="d-price">
                            <th>Цена</th>
                            <td>@Model.Price p</td>
                        </tr>
                    }

                    <tr class="d-type">
                        <th>Название</th>
                        <td> @Model.ProductName</td>
                    </tr>
                    <tr class="d-cat">
                        <th>Категория</th>
                        <td>@ProductController.GetCatName(Model.CategoryID)</td>
                    </tr>*@
                    @if (!string.IsNullOrWhiteSpace(Model.MatIronForm))
                    {

                        <tr class="d-matprod">
                            <th>Цвет</th>
                            <td>@Model.MatIronForm</td>
                        </tr>
                    }

                    @if (!string.IsNullOrWhiteSpace(Model.Hardness))
                    {

                        <tr class="d-hard">
                            <th>Масса нетто</th>
                            <td>@Model.Hardness</td>
                        </tr>
                    }
                    @if (!string.IsNullOrWhiteSpace(Model.MatProd))
                    {

                        <tr class="d-matprod">
                            <th>Материал изделия</th>
                            <td>@Model.MatProd</td>
                        </tr>
                    }
                    @if (!string.IsNullOrWhiteSpace(Model.ProdTime))
                    {

                        <tr class="d-chan">
                            <th>Срок изготовления</th>
                            <td>@Model.ProdTime</td>
                        </tr>
                    }
                    @if (!string.IsNullOrWhiteSpace(Model.MatForm))
                    {

                        <tr class="d-matform">
                            <th>Упаковка</th>
                            <td>@Model.MatForm</td>
                        </tr>
                    }
                    @if (!string.IsNullOrWhiteSpace(Model.Channel))
                    {

                        <tr class="d-chan">
                            <th>Тип канала</th>
                            <td>@Model.Channel</td>
                        </tr>
                    }
                    @if (!string.IsNullOrWhiteSpace(Model.Coupling))
                    {

                        <tr class="d-coup">
                            <th>Система охлаждения</th>
                            <td>@Model.Coupling</td>
                        </tr>
                    }

                    @if (!string.IsNullOrWhiteSpace(Model.Block))
                    {

                        <tr class="d-block">
                            <th>Блок</th>
                            <td>@Model.Block</td>
                        </tr>
                    }

                    @if (!string.IsNullOrWhiteSpace(Model.Size))
                    {

                        <tr class="d-size">
                            <th>Размер</th>
                            <td>@Model.Size</td>
                        </tr>
                    }
                </table>
            </div>
        </div>

    </div>

    <div class="item-tabstrip-wrap">
        <div class="item-tabstrip">
            <div class="item-tabstrip__tabs">
                <ul class="item-tabstrip__tabs-wrap">
                    <li data-id="desc" class="active">Описание</li>
                    <li data-id="rev">Отзывы <span>(0)</span></li>
                    <li data-id="del">Доставка</li>

                </ul>

            </div>
            <div class="item-tabstrip__text-wrap">
                <div class="item-tabstrip__text tab" data-id="desc">
                    Диван «Каир» – отличное решение для организации минималистичной зоны отдыха. Модель выполнена в современном европейском стиле. Главная особенность «Каира» заключается в том, что при довольно компактных габаритах он раскладывается в полноценную кровать для двоих. Разумный выбор для небольшой студии или однокомнатной квартиры!

                </div>
                <div class="item-tabstrip__text tab" data-id="rev">
                    отзывы (0)
                </div>
                <div class="item-tabstrip__text tab" data-id="del">
                    доставка
                </div>
</div>
    </div>
</div>
</div>
@Scripts.Render("~/bundles/zoom")
<script>
    $(function () {
        $('.prod-imglist li:eq(0)').css({ border: '1px solid rgb(189, 41, 41)' });
        // $('#zoom_1').elevateZoom({ tint: true, tintColour: 'black', tintOpacity: 0.5 });

        if (!XN.IsTablet)
            $('#zoom_1').elevateZoom();

        $('.prev, .next').hide();
        // slider 1
        $('.tab:first').show();
        $(document).on('click', '.item-tabstrip__tabs-wrap li', function () {
            $('.tab').hide();
            $('.item-tabstrip__tabs-wrap li').removeClass('active');
            var id = $(this).data('id');
            $('.tab[data-id="' + id + '"]').show();
            $('.item-tabstrip__tabs-wrap li[data-id="' + id + '"]').addClass('active');

        })
    });


</script>
